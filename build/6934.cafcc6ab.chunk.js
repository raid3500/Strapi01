"use strict";(self.webpackChunkproject_6_v_4_20_2=self.webpackChunkproject_6_v_4_20_2||[]).push([[6934],{56934:(j,D,s)=>{s.r(D),s.d(D,{default:()=>x});var t=s(92132),r=s(21272),i=s(38413),c=s(55356),O=s(85963),h=s(4198),o=s(94061),A=s(83997),f=s(30893),v=s(90151),p=s(68074),l=s(7441),C=s(7537),E=s(88875),d=s(51337),L=s(54514),_=s(83925),g=s(93337),M=s(61535),I=s(54894),B=s(63891),P=s(12083),a=s(38574),e=s(12170),W=s(74930);const S=P.Ik().shape({restrictedAccess:P.zM(),password:P.Yj().when("restrictedAccess",(n,m)=>n?m.required(d.iW.required):m)}),x=()=>{(0,d.L4)();const{formatMessage:n}=(0,I.A)(),{submit:m,data:U,isLoading:w}=(0,e.u)(),[R,J]=(0,r.useState)(!1),{allowedActions:N}=(0,d.ec)(a.P),Q=T=>{m.mutate({prefix:U?.prefix,body:T})};return(0,t.jsx)(i.g,{children:w?(0,t.jsx)(d.Bl,{children:"Plugin settings are loading"}):(0,t.jsx)(M.l1,{initialValues:{restrictedAccess:U?.documentationAccess.restrictedAccess||!1,password:""},onSubmit:Q,validationSchema:S,children:({handleSubmit:T,values:u,handleChange:V,errors:K,setFieldTouched:z,setFieldValue:y,dirty:H})=>(0,t.jsxs)(d.lV,{noValidate:!0,onSubmit:T,children:[(0,t.jsx)(c.Q,{title:n({id:(0,e.g)("plugin.name"),defaultMessage:"Documentation"}),subtitle:n({id:(0,e.g)("pages.SettingsPage.header.description"),defaultMessage:"Configure the documentation plugin"}),primaryAction:(0,t.jsx)(O.$,{type:"submit",startIcon:(0,t.jsx)(L.A,{}),disabled:!H&&N.canUpdate,children:n({id:(0,e.g)("pages.SettingsPage.Button.save"),defaultMessage:"Save"})})}),(0,t.jsx)(h.s,{children:(0,t.jsx)(o.a,{background:"neutral0",hasRadius:!0,shadow:"filterShadow",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7,children:(0,t.jsxs)(A.s,{direction:"column",alignItems:"stretch",gap:4,children:[(0,t.jsx)(f.o,{variant:"delta",as:"h2",children:n({id:"global.settings",defaultMessage:"Settings"})}),(0,t.jsxs)(v.x,{gap:4,children:[(0,t.jsx)(p.E,{col:6,s:12,children:(0,t.jsx)(l.l,{name:"restrictedAccess",label:n({id:(0,e.g)("pages.SettingsPage.toggle.label"),defaultMessage:"Restricted Access"}),hint:n({id:(0,e.g)("pages.SettingsPage.toggle.hint"),defaultMessage:"Make the documentation endpoint private"}),checked:u.restrictedAccess,onChange:()=>{u.restrictedAccess===!0&&(y("password","",!1),z("password",!1,!1)),y("restrictedAccess",!u.restrictedAccess,!1)},onLabel:"On",offLabel:"Off"})}),u.restrictedAccess&&(0,t.jsx)(p.E,{col:6,s:12,children:(0,t.jsx)(C.k,{label:n({id:"global.password",defaultMessage:"Password"}),name:"password",placeholder:"**********",type:R?"text":"password",value:u.password,onChange:V,error:K.password?n({id:K.password,defaultMessage:"Invalid value"}):null,endAction:(0,t.jsx)($,{onClick:Y=>{Y.stopPropagation(),J(F=>!F)},label:n(R?{id:"Auth.form.password.show-password",defaultMessage:"Show password"}:{id:"Auth.form.password.hide-password",defaultMessage:"Hide password"}),children:R?(0,t.jsx)(_.A,{}):(0,t.jsx)(g.A,{})})})})]})]})})})]})})})},$=(0,B.default)(E.T)`
  svg {
    height: 1rem;
    width: 1rem;
    path {
      fill: ${({theme:n})=>n.colors.neutral600};
    }
  }
`},12170:(j,D,s)=>{s.d(D,{g:()=>O,u:()=>h});var t=s(21272),r=s(51337),i=s(74930),c=s(38574);const O=o=>`${c.p}.${o}`,h=()=>{const o=(0,r.hN)(),{del:A,post:f,put:v,get:p}=(0,r.ry)(),{formatAPIError:l}=(0,r.wq)(),{isLoading:C,isError:E,data:d,refetch:L,error:_}=(0,i.useQuery)(["get-documentation",c.p],async()=>{const{data:a}=await p(`/${c.p}/getInfos`);return a});(0,t.useEffect)(()=>{E&&_&&o({type:"warning",message:_?l(_):{id:"notification.error"}})},[E,_,o,l]);const g=a=>{o({type:"warning",message:l(a)})},M=(a,e,W)=>{L(),o({type:a,message:{id:O(e),defaultMessage:W}})},I=(0,i.useMutation)(({prefix:a,version:e})=>A(`${a}/deleteDoc/${e}`),{onSuccess:()=>M("info","notification.delete.success","Successfully deleted documentation"),onError:g}),B=(0,i.useMutation)(({prefix:a,body:e})=>v(`${a}/updateSettings`,e),{onSuccess:()=>M("success","notification.update.success","Successfully updated settings"),onError:g}),P=(0,i.useMutation)(({prefix:a,version:e})=>f(`${a}/regenerateDoc`,{version:e}),{onSuccess:()=>M("info","notification.generate.success","Successfully generated documentation"),onError:g});return{data:d,isLoading:C,isError:E,remove:I,submit:B,regenerate:P}}}}]);
